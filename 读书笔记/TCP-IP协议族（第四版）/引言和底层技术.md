# 1、引言
network：网络，一组互相连接的通信设备；
internet：互联网，两个或以上可以彼此通信的网络；
Internet：因特网，全球最大的互联网；

主干因特网服务提供商ISP通过网络接入点NAP互相连接，大部分地区ISP通过一或多个主干ISP连接，少部分地区ISP通过对等结点相互连接，本地ISP可以连接到地区ISP或主干ISP，本地ISP给端用户提供直接的服务。

RFC（Request For Comments），是一系列以编号排定的文件，收集了有关互联网相关信息，包括UNIX和因特网社群的软件文件，收录了几乎所有的互联网标准，详细说明了基本的互联网通信协议。

1个字节byte，8个比特bit，8位bit，2个16进制数。

## 2.1、开放系统互连OSI模型
OSI（Open System Interconnection）模型是一个分层的框架结构，目的是为了设计出能够让各类计算机系统相互通信的网络系统，而不用考虑各类计算机系统的底层体系结构。

- 物理层、数据链路层和网络层是网络支撑层，在物理上把数据从一个设备传送到另一个设备。
- 会话层、表示层和应用层是用户支撑层，使得本来没有关系的软件之间有了互操作性。
- 运输层，链接了网络支撑层和用户支撑层，使得底层发送的是高层可用的形式。

|层数|OSI模型|功能|
|----|----|----|
|第七层|应用层 application layer|允许访问网络资源|
|第六层|表示层 presentation layer|数据的转换、加密和压缩|
|第五层|会话层 session layer|建立、管理和终止会话|
|第四层|运输层 transport layer|提供可靠的进程到进程的交付和差错恢复|
|第三层|网络层 network layer|从源到终点传送分组，提供网络互联|
|第二层|数据链路层 data link layer|将比特组织成帧结构，提供逐跳交付|
|第一层|物理层 physical layer|经过媒体传送比特，提供机械的和电气的规约|


## 2.2、TCP/IP协议族

原始的TCP/IP协议族被定义为建立在硬件基础上的四个软件层，不过目前TCP/IP协议族被认为是一个五层模型。


|原始TCP/IP结构 | 目前TCP/IP结构 |
|-----|---|
|应用层| 应用层 |
|运输层| 运输层 |
|网际层| 网络层 |
|网络接口层| 数据链路层 |
|硬件设备| 物理层 |

### 2.2.1、物理层
在物理层，TCP/IP支持所有标准的和专用的协议，所以不同的链路可能使用不同的物理层协议，通信发生在两跳即结点之间，可能是计算机也可能是路由器，当两个结点之间建立连接后，就会有一个比特流在其之间流动，但是每个比特都会被独立对待。
物理层是结点到结点的通信。
### 2.2.2、数据链路层
在数据链路层，TCP/IP支持所以标准的和专用的协议，通信发生在两跳即结点之间，可能是计算机也可能是路由器，通信单位为帧，帧是封装了来自网络层的数据的分组，并附加首部，有时还附加尾部，首部包含了源地址和目的地址以及其他通信信息。不同的链路可能使用不同的物理层协议且要求不同格式的帧。
数据链路层是结点到结点的通信。
### 2.2.3、网络层
在网络层，TCP/IP支持的是网际协议IP，IP是TCP/IP使用的传输机制，传输的是称为数据报的分组，每个数据报独立传输，不同的数据报可以走不同的路由，也可能不按顺序到达，也可能会重复。
网络层是端到端的通信，路由器上的网络层可以查看分组中的源地址和目的地址以查找最佳路由，但不允许更改分组中的内容。
### 2.2.4、运输层
运输层负责端与端之间的完整的报文段/用户数据报/分组的通信，发送端的报文段被拆分为多个数据报分别递交给网络层传输，接收端的运输层需要等所有的数据报全部抵达后进行重装，从而得到报文段。
用户数据报协议UDP
传输控制协议TCP
流控制传输协议SCTP
### 2.2.5、应用层
应用层使用户能够获得网络所提供的服务，应用层是端到端的通信，通信数据是报文。
## 2.3、编址

|TCP/IP | 数据格式 |编址|
|-----|----|----|
|应用层| 报文 |特定应用地址|
|运输层| 报文段 |端口地址|
|网络层| 数据报 |逻辑地址|
|数据链路层| 帧 |物理地址
|物理层| 比特 |无|

### 2.3.1、逻辑地址
因为不同的网络可以使用不同的地址格式，所以设计了逻辑地址这种全局性的编址系统用以唯一地标志每一台主机，做到与底层的物理网络无关。
目前因特网上的逻辑地址是一个32位地址，用来唯一地标志连接在因特网上的每一台主机，在因特网上不存在两台具有相同IP地址的公开编址的主机。

### 2.3.2、端口地址
英特网通信的最终目标是使一个进程能够和另一个进程通信，在TCP/IP体系结构中，给一个进程指派的标号称为端口地址，长度为16位。
运输层的分组将来自应用层的数据封装成一个分组，并加入源端口地址和目的端口地址。来自运输层的分组到了网络层又与逻辑源地址和逻辑目的地址一起封装成一个新的分组。来自网络层的分组到了数据链路层又与物理源地址和下一跳的物理目的地址一起封装成一个帧。物理地址是逐跳变化的，但端口地址和逻辑地址始终保持不变。



# 3、底层技术

## 3.1有线局域网
局域网只是将计算机连接起来的孤立网络，虽然可以在内部共享资源，但绝大多数都会链接到一个广域网或者因特网上。

|局域网技术 |
|---|
|以太网|
|令牌环|
|令牌总线| 
|FDDI|
|ATM|

### 3.1.1、IEEE标准
IEEE设计了802号项目标准，用以协调不同局域网之间在制造和互连方面存在的问题，其将数据链路层划分为逻辑链路控制层LLC和媒体接入控制层MAC，并为不同的局域网协议建立了多个物理层的标准。


### 3.1.2、帧格式
|帧的字段 |注释|作用|
|---|---|---|
|前同步码|7字节|56比特交替出现的1和0，与SFD共同构成物理层首部。提醒接收系统有帧到来，并且使其与输入定是同步。|
|SFD|1字节|帧首定界符，标志（10101011），与前同步码共同构成物理层首部，作为帧开始的信号，提醒接收站这是最后一次进行同步的机会。|
|目的地址|6字节|目的站或者接收该分组的站的物理地址|
|源地址| 6字节|这个分组的发送设备的物理地址|
|长度或者类型|2字节|类型字段定义使用该MAC帧的上层协议，长度字段指明在数据字段中所包含的字节数目。|
|数据和填充|最小46字节，最大1500字节|上层协议封装的数据|
|CRC|4字节|差错检测信息|

最小帧长是64字节，最大帧长是1518字节。


### 3.1.3、物理地址
物理地址、数据链路地址、MAC地址，是由结点所在的局域网或者广域网为该节点指定的地址，以太网中的每一个站的内部都安装有自己的网络接口卡NIC，为该站提供一个6字节的物理地址，通常用十六进制记法用冒号将字节和字节分开。

源地址始终是单播地址，任何帧都只可能来自一个站，目的地址可能是单播地址、多播地址、广播地址。
在发送时，从左到右逐字节发送物理地址，但是对于每一个字节来说，最先发送的是最低位，最后发送的是最高位，所以，指定地址是单播地址还是多播地址的那一位会最先达到接收方。

|物理地址类型 | 类型判定|接收者 |
|---|---|---|
|单播 unicast|地址字段中的第一个字节的最低位是0 |单个接收者 |
|多播 multicast| 地址字段中的第一个字节的最低位是1 |一组接收者 |
|广播 boardcast| 地址字段的所有位都是1|由网络中的所有系统接收 |

### 3.1.4、以太网
|以太网|速率|
|---|---|
|标准以太网|10Mbps|
|快速以太网|100Mbps|
|吉比特以太网|1Gbps|
|10G以太网|10Gbps|



## 3.2、无线局域网
### 3.2.1、IEEE 802.11

|体系结构|释义|
|---|---|
|基本服务集BSS|由固定的或者移动的无线站以及可选的中央基站接入点AP构成|
|自组织网络|没有AP的BSS|	
|基础结构网络|有AP的BSS|
|扩展服务集ESS|由两个或以上具有AP的BSS构成|
### 3.2.2、蓝牙

蓝牙是设计用于连接具有不同功能的设备的无线局域网技术，蓝牙局域网是一种自组织网络。

|蓝牙网络类型|释义|
|---|---|
|微微网|最多8个站，一个主站，其他从站，所有从站的时钟和调频要和主站进行同步|
|分散网|多个微微网的组合，一个微微网的从站可以是另一个微微网的主站|

## 3.3、点到点广域网
点到点广域网从公共网中获取一条线路来连接两个远程设备。

|点到点广域网技术|
|---|
|56K调制解调器|
|DSL技术|
|电缆调制解调器|
|T线|
|SONET|
|PPP|

## 3.4、交换广域网

因特网的主干网可以是交换广域网，交换广域网是覆盖大面积如一个州或者国家的广域网，能向用户提供多个接入点，在网络内部用网状的点到点网络来连接各个交换机，这些交换机都有多端口连接器，可连接多个输入和输出。
局域网被认为是一种无连接技术，发送方向接收方发送的各个分组之间没有直接关系，而交换广域网是面向连接的技术，在发送方发送分组之前，发送方和接收方之间必须先建立一条连接，连接建立后指派一个标识符，在传输期间都要使用这个标识符，传输结束后连接必须正式终止，这种连接标识符代替了局域网技术中的源地址和目的地址。

|交换广域网协议|
|---|
|X.25|
|帧中继|
|ATM|

## 3.5、连接设备

|TCP/IP|连接设备|
|---|---|
|物理层|转发器/集线器|
|物理层和数据链路层|网桥/两层交换机|
|物理层、数据链路层和网络层|路由器/三层交换机|


### 3.5.1、转发器/集线器

转发器在信号变得太弱或受到损伤之前接收这个信号，然后再生或重演原来的比特模式，再把刷新后的信号发送出去。
使用总线拓扑结构的以太网局域网中，转发器的作用是连接一个局域网的两个网段从而克服同轴电缆的长度限制。
使用星型拓扑结构的以太网局域网中，集线器是一个多端口设备，可用作一个连接点，同时又有转发器的功能。
转发器/集线器是物理层设备，没有数据链路地址，不会检查接收到帧的数据链路地址，没有过滤功能。


### 3.5.2、网桥/两层交换机
作为一个物理层设备，它再生接收到的信号；作为一个数据链路层设备，它可以检查包含在帧中的MAC地址。
网桥有过滤功能，它有一张网桥表/转发表，能检查帧的目的地址然后决定帧的发出端口，但它不改变帧中的物理地址。
透明网桥，所有站都不知道它的存在，将其从系统中删除或加入所有站都不需要重新设置。
安装了透明网桥的系统的符合准则：
帧必须能从一个站转发到另一个站；转发表是通过学习网络中帧的移动规律而自动生成的；系统中必须防止形成环路。

### 3.5.3、路由器/三层交换机
作为物理层设备，它再生接收到的信号；作为数据链路层设备，它检查物理地址；作为网络层设备，它检查逻辑地址。
网桥改变了碰撞的范围，路由器限制了广播的范围。
转发器或网桥连接的是一个局域网的各个网段，路由器把独立的局域网或者广域网连接起来，构成了互联网。
路由器的每一个接口都有一个物理地址和逻辑地址。
路由器只在分组中的物理目的地址和分组抵达时的接口的物理地址相匹配时才发挥作用。
路由器在转发分组时要改变分组的物理源地址和物理目的地址。


