#1、TCP 传输控制协议
TCP为应用层提供一种面向连接的、可靠的字节流服务。

面向连接：
客户端和服务器在彼此交换数据之前必须先建立一个TCP连接，在一个连接中仅有两方进行彼此通信。

可靠性：
1、应用数据会被分割成TCP认为最适合发送的数据块，应用程序产生的数据报长度保持不变；
2、当TCP发出一个报文段之后，会启动一个定时器，等待目的端确认接收到这个报文段，如果不能够及时收到确认将重发这个报文段；
3、当TCP收到法子TCP连接另一端的数据后几分之一秒，会发送一个确认；
4、TCP会保持首部和数据的检验和，目的是检验数据在传输过程中的任何变化，如果收到报文段的检验和有差错，TCP将丢弃这个报文段而且不确认收到此报文段，并希望发送端超时且重发；
5、TCP的接收端会丢弃重复的数据；
6、TCP连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许另一端发送接收端缓冲区所能接纳的数据，防止较快主机致使较慢主机的缓冲区溢出。


TCP对字节流的内容不作任何解释，对字节流的解释由TCP连接双方的应用层解释。

TCP报文段同IP首部被封装在一个IP数据报中。

TCP首部通常是20个字节：
16位、2个字节的源端口号；
16位、2个字节的没目的端口号；
32位、4个字节的序号：用来标识从TCP发端向TCP收端发送的数据字节流，表示在报文段中的第一个数据字节。
32位、4个字节的确认序号；
4位、半个字节的首部长度；
6位保留；
1位的URG（urgent pointer）：紧急指针有效；
1位的ACK（acknowledge）：确认序号有效，确认序号包含发送确认的一段所期望收到的下一个序号，确认序号应为上次已成功收到的数据字节序号+ACK，也就是+1；
1位的PSH（push）：接收方应该尽快推进，将这个报文段交给应用层；
1位的RST（reset）：重建连接；
1位的SYN（synchronize）：同步序号用来发起一个连接，SYN标志变为1，SEQ等于该连接的初始序号ISN（initial sequence number），发送数据的第一个字节序号为ISN+SYN，也就是ISN+1；
1位的FIN（finish）：发端完成发送任务；
16位、2个字节的窗口大小：TCP的流量控制由连接的每一端通过声明的窗口大小来提供，窗口大小为字节数，起始于确认序号字段指明的值，这个值是接收端正期望接收的字节。
16位、2个字节的检验和：检验和覆盖了整个TCP报文段，包括首部和数据，这是一个强制性字段，由发端计算和存储，并由收端进行验证。
16位、2个字节的紧急指针：当URG标志为1时有效，紧急指针是一个正的偏移量，和序号字段中的值相加表示紧急数据最后一个字节的序号，是发送端向另一端发送紧急数据的一种方式。

可选字段：
最常见的可选字段是最长报文大小：MSS（maximum segment size），每个连接方通常都在通信的第一个报文段，也就是为建立连接而设置SYN标识的那个段中指明这个选项，它指明本端所能接收的最大长度的报文段。

TCP报文段中的数据部分是可选的：一个连接建立和一个连接终止时，双方交换的报文段仅有TCP首部。



#2、TCP连接的建立与终止

